# Day 28 – Setup 전용 판매 완성 (우클릭 즉시 판매 + SellZone 드랍 판매)

## 오늘 목표
- Setup 상태에서만 유닛을 정리/판매할 수 있게 만들기
- 판매 UX 2개를 모두 지원하기
  - (A안) **우클릭만으로 즉시 판매** (선택 선행 없이)
  - (B안) **SellZone(드랍 영역)에 놓으면 판매**

---

## 완료한 기능

### 1) 우클릭 즉시 판매 (선택 없이)
- 기존 문제:
  - 벤치 유닛은 "좌클릭으로 Selected 된 다음" 우클릭해야만 판매되던 버그가 있었음
- 해결:
  - **selectedUnit 의존을 제거**
  - 우클릭 시점에 **마우스 아래 Unit을 직접 탐지**해서 즉시 판매되도록 수정
- 결과:
  - **보드/벤치 모두 우클릭 단독으로 판매 가능**
  - 입력 흐름이 직관적으로 정리됨

---

### 2) SellZone 드랍 판매
- SellZone 오브젝트/콜라이더/레이어 구성 완료된 상태에서
- DragUnit 드랍 판정 로직에 SellZone 인식 추가
- SellZone 위로 드롭하면 GridManager의 판매 함수로 연결되어
  - 골드 환급
  - 타일/벤치 슬롯 참조 해제
  - 유닛 Destroy
  - UI Refresh
까지 한 번에 처리됨

---

### 3) Setup 상태 제한
- Setup이 아닐 때(배틀 중/종료 상태):
  - 드래그 이동 제한
  - 판매 제한
을 유지하도록 규칙 고정

---

## 테스트 결과
- 벤치 유닛:
  - 우클릭만으로 즉시 판매 ✅
  - SellZone 드랍 판매 ✅
- 보드 유닛:
  - 우클릭만으로 즉시 판매 ✅
  - SellZone 드랍 판매 ✅
- Setup 외 상태:
  - 판매/이동 제한 정상 ✅

---

## 남은 작업 후보(다음 세션)
- 드래그 UX 고도화:
  - 드래그 중 하이라이트(타일/벤치 슬롯/판매존)
  - 드랍 실패 시 스냅 복귀 연출
- 판매 UI 피드백:
  - +골드 플로팅 텍스트
  - 판매 사운드/이펙트
- Shop/Bench 전체 UX:
  - 클릭/드래그 기반 구매/배치 완성도 올리기

---

## 오늘 결론
- “선택 없이 우클릭 판매” 버그까지 해결하면서
  **판매 UX(우클릭 + SellZone)가 완전히 완성된 날**
- Setup 상태에서만 정리 가능 규칙도 함께 고정 완료
